name: Verify valid GitHub Token
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [ push ]

jobs:
  test-valid-token:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "ðŸ¤ The token is: ${{ github.token }}"
      - run: gh auth login --help | grep with-token
      - run: echo "${{ github.token }}" > mytoken.txt
      - run: gh auth login --with-token < mytoken.txt
      - run: gh auth status
      - run: |
          curl \
            -H "Accept: application/vnd.github+json" \
            -H "Authorization: Bearer ${{ github.token }}" \
            https://api.github.com/user/emails
  test-invalid-token:
    runs-on: ubuntu-latest
    steps:
      - run: |
          curl \
            -H "Accept: application/vnd.github+json" \
            -H "Authorization: Bearer not-a-valid-token" \
            https://api.github.com/user/emails
